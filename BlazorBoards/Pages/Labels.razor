@page "/labels"

<PageTitle>Labels</PageTitle>

<h3>Labels</h3>

<div class="labels">
    @foreach (var index in _Labels.Select((e, i) => i))
    {
        <input type="text" class="label-text editable-input" style="background: @_Labels[index].Background; color: @_Labels[index].Color" @bind-value="_Labels[index].Title" />
        <input class="label-background editable-input" type="color" style="background: @_Labels[index].Background" @bind-value="_Labels[index].Background" />
        <input class="label-color editable-input" type="color" style="background: @_Labels[index].Background" @bind-value="_Labels[index].Color" />
    }
</div>

<button class="btn btn-primary" @onclick="AddLabel">+</button>

@code {
    private List<Label> _Labels { get; set; } = new();

    protected override void OnInitialized()
    {
        _Labels = new List<Label>();
        _Labels.Add(new Label("prio1", "#000000", "#0000FF"));
        _Labels.Add(new Label("prio2", "#000000", "#00FF00"));
    }

    private void AddLabel()
    {
        var random = new Random();
        _Labels.Add(new Label("Label", "#000000", $"#{random.Next(0, 256).ToString("X2")}{random.Next(0, 256).ToString("X2")}{random.Next(0, 256).ToString("X2")}"));
    }
}
